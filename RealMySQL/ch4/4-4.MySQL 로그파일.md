## 4.4 MySQL 로그 파일
    - MySQL 로그 파일을 이용하면 서버내부에 대한 깊은 지식 없이도 MySQL의 상태나 부하를 일으키는 원인을 쉽게 찾을 수 있음.
### 4.4.1 에러 로그 파일
    - 위치 1) MySQL설정파일(my.cnf) 에서 log_error 라는 이름의 파라미터로 정의된 경로에 생성
          2) 데이터디렉토리에 .err이라는 확장자가 붙은 파일로 생성
    - 변수명을 인식 못하거나, 설정된 파라미터 값의 내용을 인식 못하는 경우 에러 메세지 출력
    - 비정상적 종료 된경우, 경우에 따라 innodb_force_recovery 파라미터를 0보다 큰 값으로 설정 후 재시작해야만, 재시작될 수 있다.
    - 쿼리 도중 발생하는 문제점은 사전 예방이 어려우며, 주기적이로 에러 로그를 검토해야 알게 된다.
    - 비정상적 종료의 경우로 MySQL 서버의 에러 로그파일에 내용이 기록되는데, 이런 메세지가 너무 많다면, 종료로직을 검토하거나, max_connect_errors
      시스템 변수 값이 너무 낮지 않은지 살펴 보는 것이 좋다.
    - InnoDB 테이블 모니터링, 락모니터링, 엔진상태 조회 등의 명령으로 인한 에러 로그 파일은 용량이 매우 큰 경우가 많아서, 모니터링 후, 다시 비활성화하는 
      것이 좋다.
    - MySQL이 세그멘테이션 폴트(Segmentation fault)로 비정상적으로 종료된 경우, 스택 트레이스를 최대한 참고해서 버그와 관련이 있는지 조사후,
      MySQL 버전을 업그레이드 하거나, 회피책을 찾는 것이 최선의 방법이다.
### 4.4.2 제너럴 쿼리 로그 파일
    - 시간단위로 실행했던 쿼리 내용이 모두 기록됨
    - 실행된 쿼리 전체 목록을 볼때, 쿼리로그를 활성화 해서 살펴볼 수 있음
    - 쿼리 실행 중에 에러가 발생해도 일단 로그 파일에 기록됨
    - 쿼리 로그 파일 설정은 general_log_file 이라는 이름의 파라미터로 설정되어 있음 (테이블 저장 설정도 가능)
### 4.4.3 슬로우 쿼리 로그 파일
    - 서비스 운영중 전체적 성능저하 검사를 하는 경우는 문제쿼리 판단히 어려움, 이럴 경우 슬로우 쿼리가 도움이 됨
    - long_query_time 시스템 변수에 설정한 시간 이상의 시간이 소요된 쿼리가 모두 기록됨.
    - 단, 기록되는 쿼리는 정상적으로 실행이 완료되어야 한다는 필요조건이 필요함.
    - log_output 옵션을 통해 파일로 기록할지, 테이블로 기록할지를 선택할 수 있음.
    - 테이블로 기록하더라도, mysql DB의 slow_log 테이블과 general_log 테이블은 CSV 스토리지 엔진을 사용하기 때문에,
      결국 CSV 파일로 저장하는 것과 동일하게 작동한다.
        - Time : 쿼리가 종료된시간(시작 시간이 아님!!)
        - Query_time : 쿼리가 실행되는데 걸린 전체 시간
        - Rows_examined : 이 쿼리가 처리되기 위해 몇 건의 레코드에 접근했는지를 의미한다.
    - Percona Toolkit 의 pt-query-digest 스크립트를 활용하면 빈도나 처리 성능별로 쿼리를 정렬해서 살펴볼 수 있다.
